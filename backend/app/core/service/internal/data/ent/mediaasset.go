// Code generated by ent, DO NOT EDIT.

package ent

import (
	"encoding/json"
	"fmt"
	"go-wind-cms/app/core/service/internal/data/ent/mediaasset"
	"strings"
	"time"

	"entgo.io/ent"
	"entgo.io/ent/dialect/sql"
)

// 媒体资源库表
type MediaAsset struct {
	config `json:"-"`
	// ID of the ent.
	// id
	ID uint32 `json:"id,omitempty"`
	// 创建时间
	CreatedAt *time.Time `json:"created_at,omitempty"`
	// 更新时间
	UpdatedAt *time.Time `json:"updated_at,omitempty"`
	// 删除时间
	DeletedAt *time.Time `json:"deleted_at,omitempty"`
	// 创建者ID
	CreatedBy *uint32 `json:"created_by,omitempty"`
	// 更新者ID
	UpdatedBy *uint32 `json:"updated_by,omitempty"`
	// 删除者ID
	DeletedBy *uint32 `json:"deleted_by,omitempty"`
	// 原始文件名
	Filename *string `json:"filename,omitempty"`
	// 媒体类型
	Type *mediaasset.Type `json:"type,omitempty"`
	// MIME 类型
	MimeType *string `json:"mime_type,omitempty"`
	// 文件大小（字节）
	Size *uint64 `json:"size,omitempty"`
	// 存储路径
	StoragePath *string `json:"storage_path,omitempty"`
	// CDN 访问 URL
	URL *string `json:"url,omitempty"`
	// 宽度（像素）
	Width *uint32 `json:"width,omitempty"`
	// 高度（像素）
	Height *uint32 `json:"height,omitempty"`
	// 时长（秒）
	Duration *uint32 `json:"duration,omitempty"`
	// ALT 文本
	AltText *string `json:"alt_text,omitempty"`
	// 标题
	Title *string `json:"title,omitempty"`
	// 说明文字
	Caption *string `json:"caption,omitempty"`
	// 媒体处理状态
	ProcessingStatus *mediaasset.ProcessingStatus `json:"processing_status,omitempty"`
	// 处理失败时的错误信息
	ProcessingError *string `json:"processing_error,omitempty"`
	// 文件哈希值
	FileHash *string `json:"file_hash,omitempty"`
	// 所属文件夹ID
	FolderID *uint32 `json:"folder_id,omitempty"`
	// 存储文件ID
	FileID *uint32 `json:"file_id,omitempty"`
	// 被引用次数
	ReferenceCount *uint32 `json:"reference_count,omitempty"`
	// 是否私密
	IsPrivate *bool `json:"is_private,omitempty"`
	// 变体文件URL
	VariantFileIds *map[string]uint32 `json:"variant_file_ids,omitempty"`
	selectValues   sql.SelectValues
}

// scanValues returns the types for scanning values from sql.Rows.
func (*MediaAsset) scanValues(columns []string) ([]any, error) {
	values := make([]any, len(columns))
	for i := range columns {
		switch columns[i] {
		case mediaasset.FieldVariantFileIds:
			values[i] = new([]byte)
		case mediaasset.FieldIsPrivate:
			values[i] = new(sql.NullBool)
		case mediaasset.FieldID, mediaasset.FieldCreatedBy, mediaasset.FieldUpdatedBy, mediaasset.FieldDeletedBy, mediaasset.FieldSize, mediaasset.FieldWidth, mediaasset.FieldHeight, mediaasset.FieldDuration, mediaasset.FieldFolderID, mediaasset.FieldFileID, mediaasset.FieldReferenceCount:
			values[i] = new(sql.NullInt64)
		case mediaasset.FieldFilename, mediaasset.FieldType, mediaasset.FieldMimeType, mediaasset.FieldStoragePath, mediaasset.FieldURL, mediaasset.FieldAltText, mediaasset.FieldTitle, mediaasset.FieldCaption, mediaasset.FieldProcessingStatus, mediaasset.FieldProcessingError, mediaasset.FieldFileHash:
			values[i] = new(sql.NullString)
		case mediaasset.FieldCreatedAt, mediaasset.FieldUpdatedAt, mediaasset.FieldDeletedAt:
			values[i] = new(sql.NullTime)
		default:
			values[i] = new(sql.UnknownType)
		}
	}
	return values, nil
}

// assignValues assigns the values that were returned from sql.Rows (after scanning)
// to the MediaAsset fields.
func (_m *MediaAsset) assignValues(columns []string, values []any) error {
	if m, n := len(values), len(columns); m < n {
		return fmt.Errorf("mismatch number of scan values: %d != %d", m, n)
	}
	for i := range columns {
		switch columns[i] {
		case mediaasset.FieldID:
			value, ok := values[i].(*sql.NullInt64)
			if !ok {
				return fmt.Errorf("unexpected type %T for field id", value)
			}
			_m.ID = uint32(value.Int64)
		case mediaasset.FieldCreatedAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field created_at", values[i])
			} else if value.Valid {
				_m.CreatedAt = new(time.Time)
				*_m.CreatedAt = value.Time
			}
		case mediaasset.FieldUpdatedAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field updated_at", values[i])
			} else if value.Valid {
				_m.UpdatedAt = new(time.Time)
				*_m.UpdatedAt = value.Time
			}
		case mediaasset.FieldDeletedAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field deleted_at", values[i])
			} else if value.Valid {
				_m.DeletedAt = new(time.Time)
				*_m.DeletedAt = value.Time
			}
		case mediaasset.FieldCreatedBy:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field created_by", values[i])
			} else if value.Valid {
				_m.CreatedBy = new(uint32)
				*_m.CreatedBy = uint32(value.Int64)
			}
		case mediaasset.FieldUpdatedBy:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field updated_by", values[i])
			} else if value.Valid {
				_m.UpdatedBy = new(uint32)
				*_m.UpdatedBy = uint32(value.Int64)
			}
		case mediaasset.FieldDeletedBy:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field deleted_by", values[i])
			} else if value.Valid {
				_m.DeletedBy = new(uint32)
				*_m.DeletedBy = uint32(value.Int64)
			}
		case mediaasset.FieldFilename:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field filename", values[i])
			} else if value.Valid {
				_m.Filename = new(string)
				*_m.Filename = value.String
			}
		case mediaasset.FieldType:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field type", values[i])
			} else if value.Valid {
				_m.Type = new(mediaasset.Type)
				*_m.Type = mediaasset.Type(value.String)
			}
		case mediaasset.FieldMimeType:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field mime_type", values[i])
			} else if value.Valid {
				_m.MimeType = new(string)
				*_m.MimeType = value.String
			}
		case mediaasset.FieldSize:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field size", values[i])
			} else if value.Valid {
				_m.Size = new(uint64)
				*_m.Size = uint64(value.Int64)
			}
		case mediaasset.FieldStoragePath:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field storage_path", values[i])
			} else if value.Valid {
				_m.StoragePath = new(string)
				*_m.StoragePath = value.String
			}
		case mediaasset.FieldURL:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field url", values[i])
			} else if value.Valid {
				_m.URL = new(string)
				*_m.URL = value.String
			}
		case mediaasset.FieldWidth:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field width", values[i])
			} else if value.Valid {
				_m.Width = new(uint32)
				*_m.Width = uint32(value.Int64)
			}
		case mediaasset.FieldHeight:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field height", values[i])
			} else if value.Valid {
				_m.Height = new(uint32)
				*_m.Height = uint32(value.Int64)
			}
		case mediaasset.FieldDuration:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field duration", values[i])
			} else if value.Valid {
				_m.Duration = new(uint32)
				*_m.Duration = uint32(value.Int64)
			}
		case mediaasset.FieldAltText:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field alt_text", values[i])
			} else if value.Valid {
				_m.AltText = new(string)
				*_m.AltText = value.String
			}
		case mediaasset.FieldTitle:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field title", values[i])
			} else if value.Valid {
				_m.Title = new(string)
				*_m.Title = value.String
			}
		case mediaasset.FieldCaption:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field caption", values[i])
			} else if value.Valid {
				_m.Caption = new(string)
				*_m.Caption = value.String
			}
		case mediaasset.FieldProcessingStatus:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field processing_status", values[i])
			} else if value.Valid {
				_m.ProcessingStatus = new(mediaasset.ProcessingStatus)
				*_m.ProcessingStatus = mediaasset.ProcessingStatus(value.String)
			}
		case mediaasset.FieldProcessingError:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field processing_error", values[i])
			} else if value.Valid {
				_m.ProcessingError = new(string)
				*_m.ProcessingError = value.String
			}
		case mediaasset.FieldFileHash:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field file_hash", values[i])
			} else if value.Valid {
				_m.FileHash = new(string)
				*_m.FileHash = value.String
			}
		case mediaasset.FieldFolderID:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field folder_id", values[i])
			} else if value.Valid {
				_m.FolderID = new(uint32)
				*_m.FolderID = uint32(value.Int64)
			}
		case mediaasset.FieldFileID:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field file_id", values[i])
			} else if value.Valid {
				_m.FileID = new(uint32)
				*_m.FileID = uint32(value.Int64)
			}
		case mediaasset.FieldReferenceCount:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field reference_count", values[i])
			} else if value.Valid {
				_m.ReferenceCount = new(uint32)
				*_m.ReferenceCount = uint32(value.Int64)
			}
		case mediaasset.FieldIsPrivate:
			if value, ok := values[i].(*sql.NullBool); !ok {
				return fmt.Errorf("unexpected type %T for field is_private", values[i])
			} else if value.Valid {
				_m.IsPrivate = new(bool)
				*_m.IsPrivate = value.Bool
			}
		case mediaasset.FieldVariantFileIds:
			if value, ok := values[i].(*[]byte); !ok {
				return fmt.Errorf("unexpected type %T for field variant_file_ids", values[i])
			} else if value != nil && len(*value) > 0 {
				if err := json.Unmarshal(*value, &_m.VariantFileIds); err != nil {
					return fmt.Errorf("unmarshal field variant_file_ids: %w", err)
				}
			}
		default:
			_m.selectValues.Set(columns[i], values[i])
		}
	}
	return nil
}

// Value returns the ent.Value that was dynamically selected and assigned to the MediaAsset.
// This includes values selected through modifiers, order, etc.
func (_m *MediaAsset) Value(name string) (ent.Value, error) {
	return _m.selectValues.Get(name)
}

// Update returns a builder for updating this MediaAsset.
// Note that you need to call MediaAsset.Unwrap() before calling this method if this MediaAsset
// was returned from a transaction, and the transaction was committed or rolled back.
func (_m *MediaAsset) Update() *MediaAssetUpdateOne {
	return NewMediaAssetClient(_m.config).UpdateOne(_m)
}

// Unwrap unwraps the MediaAsset entity that was returned from a transaction after it was closed,
// so that all future queries will be executed through the driver which created the transaction.
func (_m *MediaAsset) Unwrap() *MediaAsset {
	_tx, ok := _m.config.driver.(*txDriver)
	if !ok {
		panic("ent: MediaAsset is not a transactional entity")
	}
	_m.config.driver = _tx.drv
	return _m
}

// String implements the fmt.Stringer.
func (_m *MediaAsset) String() string {
	var builder strings.Builder
	builder.WriteString("MediaAsset(")
	builder.WriteString(fmt.Sprintf("id=%v, ", _m.ID))
	if v := _m.CreatedAt; v != nil {
		builder.WriteString("created_at=")
		builder.WriteString(v.Format(time.ANSIC))
	}
	builder.WriteString(", ")
	if v := _m.UpdatedAt; v != nil {
		builder.WriteString("updated_at=")
		builder.WriteString(v.Format(time.ANSIC))
	}
	builder.WriteString(", ")
	if v := _m.DeletedAt; v != nil {
		builder.WriteString("deleted_at=")
		builder.WriteString(v.Format(time.ANSIC))
	}
	builder.WriteString(", ")
	if v := _m.CreatedBy; v != nil {
		builder.WriteString("created_by=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.UpdatedBy; v != nil {
		builder.WriteString("updated_by=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.DeletedBy; v != nil {
		builder.WriteString("deleted_by=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.Filename; v != nil {
		builder.WriteString("filename=")
		builder.WriteString(*v)
	}
	builder.WriteString(", ")
	if v := _m.Type; v != nil {
		builder.WriteString("type=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.MimeType; v != nil {
		builder.WriteString("mime_type=")
		builder.WriteString(*v)
	}
	builder.WriteString(", ")
	if v := _m.Size; v != nil {
		builder.WriteString("size=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.StoragePath; v != nil {
		builder.WriteString("storage_path=")
		builder.WriteString(*v)
	}
	builder.WriteString(", ")
	if v := _m.URL; v != nil {
		builder.WriteString("url=")
		builder.WriteString(*v)
	}
	builder.WriteString(", ")
	if v := _m.Width; v != nil {
		builder.WriteString("width=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.Height; v != nil {
		builder.WriteString("height=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.Duration; v != nil {
		builder.WriteString("duration=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.AltText; v != nil {
		builder.WriteString("alt_text=")
		builder.WriteString(*v)
	}
	builder.WriteString(", ")
	if v := _m.Title; v != nil {
		builder.WriteString("title=")
		builder.WriteString(*v)
	}
	builder.WriteString(", ")
	if v := _m.Caption; v != nil {
		builder.WriteString("caption=")
		builder.WriteString(*v)
	}
	builder.WriteString(", ")
	if v := _m.ProcessingStatus; v != nil {
		builder.WriteString("processing_status=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.ProcessingError; v != nil {
		builder.WriteString("processing_error=")
		builder.WriteString(*v)
	}
	builder.WriteString(", ")
	if v := _m.FileHash; v != nil {
		builder.WriteString("file_hash=")
		builder.WriteString(*v)
	}
	builder.WriteString(", ")
	if v := _m.FolderID; v != nil {
		builder.WriteString("folder_id=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.FileID; v != nil {
		builder.WriteString("file_id=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.ReferenceCount; v != nil {
		builder.WriteString("reference_count=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := _m.IsPrivate; v != nil {
		builder.WriteString("is_private=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	builder.WriteString("variant_file_ids=")
	builder.WriteString(fmt.Sprintf("%v", _m.VariantFileIds))
	builder.WriteByte(')')
	return builder.String()
}

// MediaAssets is a parsable slice of MediaAsset.
type MediaAssets []*MediaAsset
